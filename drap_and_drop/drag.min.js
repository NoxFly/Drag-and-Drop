class Drag{constructor(t){this.elements=[],this.makeAllDraggable(t),this.dragging=null,this.events={dragmove:new Event("dragmove"),pointerup:new Event("pointerup"),pointerdown:new Event("pointerdown")},document.addEventListener("mouseup",()=>{this.dragging&&this.dragEnd()}),document.addEventListener("mousemove",()=>{this.dragging&&this.dragMove()})}makeAllDraggable(t){const e=document.querySelectorAll(t);for(let t=0;t<e.length;t++){const n=e[t],i=n.getBoundingClientRect().x,r=n.getBoundingClientRect().y;this.elements[t]={$element:n,isDragging:!1,startingPosition:{x:i,y:r},position:{x:i,y:r},relativeStartingPosition:{x:i,y:r},relativePosition:{x:i,y:r},dragPoint:{x:null,y:null},width:n.clientWidth,height:n.clientHeight},n.setAttribute("draggable","true"),n.addEventListener("pointerdown",()=>this.pointerDown(this.elements[t]))}}pointerDown(t){this.dragging=t,document.body.dispatchEvent(this.events.pointerdown),this.dragging.dragPoint.x=window.event.clientX-this.dragging.relativeStartingPosition.x,this.dragging.dragPoint.y=window.event.clientY-this.dragging.relativeStartingPosition.y,this.dragging.isDragging=!0}dragMove(){this.dragging.$element.dispatchEvent(this.events.dragmove),this.changeElementPosition(window.event.clientX,window.event.clientY),this.updateElement()}dragEnd(){document.body.dispatchEvent(this.events.pointerup),this.dragging.relativeStartingPosition.x=this.dragging.position.x,this.dragging.relativeStartingPosition.y=this.dragging.position.y,this.dragging.isDragging=!1,this.dragging=null}on(t,e){for(var n in this.elements)this.elements[n].$element.addEventListener(t,e)}changeElementPosition(t,e){this.dragging.position.x=t-this.dragging.dragPoint.x,this.dragging.position.y=e-this.dragging.dragPoint.y,this.dragging.relativePosition.x=this.dragging.position.x-this.dragging.startingPosition.x,this.dragging.relativePosition.y=this.dragging.position.y-this.dragging.startingPosition.y}updateElement(){var t=this.dragging,e=t.position.x-t.startingPosition.x,n=t.position.y-t.startingPosition.y;this.dragging.$element.style.transform="translate("+e+"px, "+n+"px)"}}